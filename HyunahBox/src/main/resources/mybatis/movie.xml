<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="movie">
	<select id="list" resultType="Movie">
		SELECT MOVIE.MOVIE_CODE, TITLE, HEART, MOVIE_TIME, MEMBER.ID
		FROM HEARTMOVIE, MOVIE, MEMBER
		WHERE movie.movie_code = HEARTMOVIE.MOVIE_CODE(+)
		    AND MEMBER.ID=HEARTMOVIE.ID
	</select>
	
	<insert id="add">
		INSERT INTO movie VALUES(MOVIE_CODE_SEQ.nextval, #{title}, #{openDate}, #{heart}, #{movieTime})
	</insert>
	
	<select id="getItem" resultType="Movie">
		SELECT * FROM movie WHERE movie_code=#{movieCode}
	</select>
	
	<update id="update">
		UPDATE movie
		SET title=#{title}, open_date=#{openDate}, heart=#{heart}, movie_time=#{movieTime}
		WHERE movie_code=#{movieCode}
	</update>
 	
 	<delete id="delete">
 		DELETE FROM movie WHERE movie_code=#{movieCode} 
 	</delete>
</mapper>